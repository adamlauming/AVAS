%???????
function spl = SPLCal( x,fs,flen )
% SPLCal?????????????????
% ????x????????
% ???x??????????????????????x???????
% ????fs????????Hz
% flen??????????????ms
% spl??????????
% ?????????
Length = length(x);
% ??????????
M = flen*fs/1000;
if Length~=M
   error('???????????????'); 
end
%%-------------------??????-----------------
% ???????????pa = sqrt((x(1)^2+x(2)^2+...+x(M)^2)/M)
% ???Pa
pp = 0;
for i = 1:M
   pp = pp + x(i)^2;
end
pa = sqrt(pp/M);
%%----------------?????---------------------
% ????spl=20*log10(pa/p0),???dB
% ????p0????Pa
p0 = 2*10^-5;
spl = 20*log10(pa/p0);
end